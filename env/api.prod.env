# ============================================================================
# Django production overrides
# docker-compose.yml에서 api.common.env 다음에 로드됩니다.
# ============================================================================

# --- Runtime metadata -------------------------------------------------------
ENVIRONMENT=production
# 배포 전 강력한 랜덤 문자열로 교체 (예: openssl rand -hex 64)
DJANGO_SECRET_KEY=change-me
# DEBUG 비활성화는 필수
DJANGO_DEBUG=0
# Nginx 업스트림 호스트(web, api) + 실제 서비스 도메인 지정
DJANGO_ALLOWED_HOSTS=api,web,example.com

# --- Frontend ↔ Backend URL 매핑 -------------------------------------------
# HTTPS 종단 도메인으로 교체 (예: https://app.example.com)
FRONTEND_BASE_URL=https://example.com
DJANGO_CORS_ALLOWED_ORIGINS=https://example.com
DJANGO_CSRF_TRUSTED_ORIGINS=https://example.com

# --- Security toggles -------------------------------------------------------
# 프록시 뒤에서 동작 시 HTTPS 강제 및 HSTS 활성화
DJANGO_SECURE=1
SECURE_SSL_REDIRECT=1
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=1
SECURE_HSTS_PRELOAD=1

# --- Auth helpers -----------------------------------------------------------
# 운영 환경에서는 더미 로그인 비활성화
OIDC_DEV_LOGIN_ENABLED=0
