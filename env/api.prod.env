# ============================================================================== 
# Django 운영 환경 전용 Override
# ------------------------------------------------------------------------------
# docker-compose.yml 에서 api.common.env 다음 순서로 로드됩니다.
# - 사내 ADFS(OIDC) 서버 연동을 전제로 실제 엔드포인트 정보를 채웁니다.
# - 코드 변경 시 컨테이너를 재배포하기 전까지 반영되지 않습니다.
# - HTTPS 종단은 deploy/nginx/inner.conf.backup 를 사용하는 내부 Nginx 로 마무리합니다.
# ============================================================================== 

# --- Runtime metadata --------------------------------------------------------
ENVIRONMENT=production
DJANGO_SECRET_KEY=change-me
DJANGO_DEBUG=0
# Nginx 업스트림 호스트(web, api)와 최종 서비스 도메인 전체를 포함
DJANGO_ALLOWED_HOSTS=api,web,example.com,stg.plane.samsungds.net

# --- Frontend ↔ Backend URL --------------------------------------------------
# 실제 서비스 도메인으로 교체하세요 (예: https://app.example.com)
FRONTEND_BASE_URL=https://stg.plane.samsungds.net
DJANGO_CORS_ALLOWED_ORIGINS=https://stg.plane.samsungds.net
DJANGO_CSRF_TRUSTED_ORIGINS=https://stg.plane.samsungds.net
PUBLIC_API_BASE_URL=/api

# --- Security toggles --------------------------------------------------------
# 운영에서는 HTTPS + HSTS 강제. 프록시 체인에 맞게 값 조정 가능
DJANGO_SECURE=1
SECURE_SSL_REDIRECT=1
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=1
SECURE_HSTS_PRELOAD=1

# --- Corporate ADFS (OIDC) ---------------------------------------------------
# 사내 ADFS 엔드포인트로 교체하세요. 값이 비어 있으면 외부 IdP 연동이 비활성화됩니다.
OIDC_CLIENT_ID=
OIDC_ISSUER=
ADFS_AUTH_URL=
ADFS_LOGOUT_URL=
OIDC_REDIRECT_URI=
ADFS_CER_PATH=
ALLOWED_REDIRECT_HOSTS=stg.plane.samsungds.net

# --- RAG (Email) endpoints ---------------------------------------------------
RAG_SEARCH_URL=http://apigw.samsungds.net:8000/ds_llm_rag/2/dsllmrag/elastic/v2/retrieve-rrf
RAG_INSERT_URL=http://apigw.samsungds.net:8000/ds_llm_rag/2/dsllmrag/elastic/v2/insert-doc
RAG_DELETE_URL=http://apigw.samsungds.net:8000/ds_llm_rag/2/dsllmrag/elastic/v2/delete-doc
RAG_INDEX_NAME=rp-unclassified
RAG_INDEX_INFO_URL=http://apigw.samsungds.net:8000/ds_llm_rag/2/dsllmrag/elastic/v2/index-info
