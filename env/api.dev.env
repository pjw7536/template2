# ============================================================================== 
# Django 개발 환경 전용 Override
# ------------------------------------------------------------------------------
# docker-compose.dev.yml 에서 api.common.env 다음에 로드됩니다.
# - FastAPI 기반 더미 ADFS 서버 연동
# - 코드 변경 사항을 runserver 핫리로드로 즉시 반영
# - HTTP 로컬 리버스 프록시(default.conf) 전제
# ============================================================================== 

# --- Runtime metadata --------------------------------------------------------
ENVIRONMENT=development
DJANGO_SECRET_KEY=local-dev-secret
DJANGO_DEBUG=1
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1,api,stg.plane.samsungds.net

# --- Frontend ↔ Backend URL --------------------------------------------------
# 개발용 Nginx :80 에서 / (프론트엔드) 와 /api (Django)를 동시에 노출
FRONTEND_BASE_URL=http://localhost
DJANGO_CORS_ALLOWED_ORIGINS=http://localhost
DJANGO_CSRF_TRUSTED_ORIGINS=http://localhost
PUBLIC_API_BASE_URL=/api

# --- Security toggles --------------------------------------------------------
# 로컬 개발 시 HTTPS 관련 강제 옵션을 모두 해제합니다.
DJANGO_SECURE=0
SECURE_SSL_REDIRECT=0
SECURE_HSTS_SECONDS=0
SECURE_HSTS_INCLUDE_SUBDOMAINS=0
SECURE_HSTS_PRELOAD=0
# 로컬 HTTP 환경에서 세션 쿠키가 동작하도록 Secure/SameSite 정책을 완화합니다.
SESSION_COOKIE_SECURE=0
CSRF_COOKIE_SECURE=0
SESSION_COOKIE_SAMESITE=Lax

# --- Dummy ADFS (FastAPI) ----------------------------------------------------
# docker-compose.dev 의 adfs 서비스(포트 9000)를 기준으로 설정
OIDC_CLIENT_ID=dummy-client
OIDC_ISSUER=http://localhost:9000/adfs
ADFS_AUTH_URL=http://localhost:9000/authorize
ADFS_LOGOUT_URL=http://localhost:9000/logout
OIDC_REDIRECT_URI=http://localhost/auth/google/callback/
ADFS_CER_PATH=/app/dummy_adfs_public.cer
ALLOWED_REDIRECT_HOSTS=samsungds.net,samsungds.net:8003

# --- Assistant upstream (dummy LLM via adfs_dummy) ---------------------------
# 개발 환경에서는 Django assistant가 실제 LLM 게이트웨이를 호출하지 않고
# docker-compose.dev.yml 의 adfs_dummy(FastAPI)로 라우팅합니다.
ASSISTANT_DUMMY_MODE=0
ASSISTANT_DUMMY_USE_RAG=1
ASSISTANT_LLM_URL=http://adfs:9000/v1/chat/completions

# --- Dummy RAG/Mail endpoints (adfs_dummy) -----------------------------------
RAG_SEARCH_URL=http://adfs:9000/rag/search
RAG_INSERT_URL=http://adfs:9000/rag/insert
RAG_DELETE_URL=http://adfs:9000/rag/delete
RAG_INDEX_NAME=emails
RAG_INDEX_INFO_URL=http://adfs:9000/rag/index-info

ASSISTANT_RAG_URL=http://adfs:9000/rag/search
ASSISTANT_RAG_INSERT_URL=http://adfs:9000/rag/insert
ASSISTANT_RAG_DELETE_URL=http://adfs:9000/rag/delete
ASSISTANT_RAG_INDEX_INFO_URL=http://adfs:9000/rag/index-info
ASSISTANT_RAG_INDEX_NAME=emails
ASSISTANT_RAG_PERMISSION_GROUPS=["rag-public"]
ASSISTANT_RAG_HEADERS={}
ASSISTANT_RAG_NUM_DOCS=5

# --- Knox Mail send API (dummy via adfs_dummy) -------------------------------
MAIL_API_URL=http://adfs:9000/mail/send
MAIL_API_KEY=dummy-ticket
MAIL_API_SYSTEM_ID=plane
MAIL_API_KNOX_ID=dummy-knox-id

# --- Drone SOP ingest/Jira (dummy via adfs_dummy) ----------------------------
DRONE_SOP_DUMMY_MODE=1
DRONE_SOP_DUMMY_MAIL_MESSAGES_URL=http://adfs:9000/mail/messages
DRONE_JIRA_BASE_URL=http://adfs:9000/jira
DRONE_JIRA_TOKEN=dummy-token
DRONE_JIRA_PROJECT_KEY_BY_LINE={"L1":"DUMMY"}
DRONE_JIRA_ISSUE_TYPE=Task
DRONE_SOP_POP3_INGEST_TRIGGER_TOKEN=5ca99f0ae7b1fcd3f958ebb1c2ee4639d0a8fada21e8ff009d27f42cd2bbf31e
DRONE_SOP_JIRA_TRIGGER_TOKEN=5ca99f0ae7b1fcd3f958ebb1c2ee4639d0a8fada21e8ff009d27f42cd2bbf31e
