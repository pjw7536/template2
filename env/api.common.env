# ============================================================================== 
# Django 공통 환경 변수 템플릿
# ------------------------------------------------------------------------------
# docker-compose(dev/prod) 모두에서 가장 먼저 불러오는 기본 설정입니다.
# 운영 비밀 값은 실제 배포 시 외부 Secret Manager 또는 Override 파일로 교체하세요.
# ============================================================================== 

DJANGO_ALLOWED_HOSTS=api,web,plane.samsungds.net

# --- Core metadata ------------------------------------------------------------
# 애플리케이션에서 기본적으로 사용할 타임존
DJANGO_TIME_ZONE=UTC

# --- Database connection ------------------------------------------------------
# Django ORM이 사용할 PostgreSQL 접속 정보 (서비스/배포 환경에 맞게 조정)
DJANGO_DB_ENGINE=django.db.backends.postgresql
DJANGO_DB_NAME=appdb
DJANGO_DB_USER=airflow
DJANGO_DB_PASSWORD=airflow
DJANGO_DB_HOST=airflow-postgres
DJANGO_DB_PORT=5432
# 장기 연결 유지 시간(초). 운영 환경에서는 DB 정책에 맞춰 조정하세요.
DJANGO_DB_CONN_MAX_AGE=60

# --- Authentication redirect targets -----------------------------------------
# 로그인/로그아웃 이후 이동할 기본 경로
DJANGO_LOGIN_REDIRECT_URL=/
DJANGO_LOGOUT_REDIRECT_URL=/

# --- Reverse proxy awareness --------------------------------------------------
# Nginx 같은 프록시 뒤에서 동작할 때 필요한 Django 보안 헤더 플래그
USE_X_FORWARDED_HOST=1
DJANGO_USE_PROXY_SSL_HEADER=1
SECURE_REFERRER_POLICY=same-origin

# --- Public API exposure ------------------------------------------------------
# 외부에서 접근할 때 사용할 API 베이스 경로 (프록시에서 /api 로 라우팅)
PUBLIC_API_BASE_URL=

# --- OIDC / ADFS provider defaults -------------------------------------------
# 실제 IdP(Azure AD / 사내 ADFS 등) 정보를 환경별 override 파일에서 설정합니다.
OIDC_CLIENT_ID=
OIDC_ISSUER=
ADFS_AUTH_URL=
ADFS_LOGOUT_URL=
OIDC_REDIRECT_URI=
ADFS_CER_PATH=
ALLOWED_REDIRECT_HOSTS=samsungds.net,samsungds.net:8003

# --- Gunicorn runtime defaults ------------------------------------------------
# 운영 컨테이너에서 사용되는 기본 워커/스레드 수 (필요 시 override)
GUNICORN_WORKERS=3
GUNICORN_THREADS=2

# --- Assistant chat (RAG + LLM) ----------------------------------------------
ASSISTANT_DUMMY_MODE=0
ASSISTANT_DUMMY_REPLY=
ASSISTANT_DUMMY_CONTEXTS=[]
ASSISTANT_DUMMY_DELAY_MS=0
ASSISTANT_RAG_URL=http://ragserver/llm_rag/2/dsllmrag/elastic/v2/retrieve-rrf
ASSISTANT_RAG_INDEX_NAME=rp-roles
ASSISTANT_RAG_PERMISSION_GROUPS=["rag-public"]
ASSISTANT_RAG_HEADERS={"Content-Type":"application/json","x-dep-ticket":"token","api-key":"apikey"}
ASSISTANT_RAG_NUM_DOCS=5
ASSISTANT_LLM_URL=http://llmapiserver/gpt-oss/1/gpt-oss-120b/v1/chat/completions
ASSISTANT_LLM_COMMON_HEADERS={"Send-System-Name":"Observer","User-Id":"username","User-Type":"AD_ID","Accept":"text/event-stream; charset=utf-8","Content-Type":"application/json"}
ASSISTANT_LLM_CREDENTIAL=credential:TICKET-token
ASSISTANT_LLM_MODEL=openai/gpt-oss-120b
ASSISTANT_LLM_TEMPERATURE=0.5
ASSISTANT_LLM_SYSTEM_MESSAGE=항상 한국어로 대답하는 친절한 AI
ASSISTANT_REQUEST_TIMEOUT=30
