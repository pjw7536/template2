{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/features/line-dashboard/components/data-table/constants.js"],"sourcesContent":["export const DEFAULT_TABLE = \"drone_sop_v3\"\nexport const DEFAULT_SINCE_DAYS = 3\n\nconst DAY_IN_MS = 86_400_000\n\nexport const toDateInputValue = (date) => date.toISOString().split(\"T\")[0]\n\nexport const getDefaultSinceValue = () => {\n  const now = new Date()\n  const since = new Date(now.getTime() - DEFAULT_SINCE_DAYS * DAY_IN_MS)\n  return toDateInputValue(since)\n}\n\nexport const SAVING_DELAY_MS = 180\nexport const MIN_SAVING_VISIBLE_MS = 500\nexport const SAVED_VISIBLE_MS = 800\n\nexport const STEP_COLUMN_KEYS = [\n  \"main_step\",\n  \"metro_steps\",\n  \"metro_current_step\",\n  \"metro_end_step\",\n  \"custom_end_step\",\n  \"inform_step\",\n]\n\nexport const STEP_COLUMN_KEY_SET = new Set(STEP_COLUMN_KEYS)\n\nexport const numberFormatter = new Intl.NumberFormat(\"en-US\")\nexport const timeFormatter = new Intl.DateTimeFormat(\"en-US\", {\n  hour: \"2-digit\",\n  minute: \"2-digit\",\n  second: \"2-digit\",\n})\n\nexport const dateFormatter = new Intl.DateTimeFormat(\"en-US\", {\n  year: \"numeric\",\n  month: \"2-digit\",\n  day: \"2-digit\",\n})\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAO,MAAM,gBAAgB;AACtB,MAAM,qBAAqB;AAElC,MAAM,YAAY;AAEX,MAAM,mBAAmB,CAAC,OAAS,KAAK,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;AAEnE,MAAM,uBAAuB;IAClC,MAAM,MAAM,IAAI;IAChB,MAAM,QAAQ,IAAI,KAAK,IAAI,OAAO,KAAK,qBAAqB;IAC5D,OAAO,iBAAiB;AAC1B;AAEO,MAAM,kBAAkB;AACxB,MAAM,wBAAwB;AAC9B,MAAM,mBAAmB;AAEzB,MAAM,mBAAmB;IAC9B;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,sBAAsB,IAAI,IAAI;AAEpC,MAAM,kBAAkB,IAAI,KAAK,YAAY,CAAC;AAC9C,MAAM,gBAAgB,IAAI,KAAK,cAAc,CAAC,SAAS;IAC5D,MAAM;IACN,QAAQ;IACR,QAAQ;AACV;AAEO,MAAM,gBAAgB,IAAI,KAAK,cAAc,CAAC,SAAS;IAC5D,MAAM;IACN,OAAO;IACP,KAAK;AACP","debugId":null}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/features/line-dashboard/components/data-table/cells/comment-cell.jsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport { Button } from \"@/components/ui/button\"\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\"\n\nexport function CommentCell({ meta, recordId, baseValue }) {\n  const isEditing = Boolean(meta.commentEditing[recordId])\n  const draftValue = meta.commentDrafts[recordId]\n  const value = isEditing ? draftValue ?? baseValue : baseValue\n  const isSaving = Boolean(meta.updatingCells[`${recordId}:comment`])\n  const errorMessage = meta.updateErrors[`${recordId}:comment`]\n  const indicator = meta.cellIndicators[`${recordId}:comment`]\n  const indicatorStatus = indicator?.status\n  const [showSuccessIndicator, setShowSuccessIndicator] = React.useState(false)\n  const successDismissTimerRef = React.useRef(null)\n\n  React.useEffect(() => {\n    if (!isEditing) {\n      setShowSuccessIndicator(false)\n      return\n    }\n\n    if (indicatorStatus === \"saving\") {\n      setShowSuccessIndicator(false)\n      return\n    }\n\n    if (indicatorStatus === \"saved\") {\n      setShowSuccessIndicator(true)\n      if (successDismissTimerRef.current) {\n        window.clearTimeout(successDismissTimerRef.current)\n      }\n      successDismissTimerRef.current = window.setTimeout(() => {\n        meta.setCommentEditingState(recordId, false)\n        meta.removeCommentDraftValue(recordId)\n        meta.clearUpdateError(`${recordId}:comment`)\n        setShowSuccessIndicator(false)\n        successDismissTimerRef.current = null\n      }, 800)\n    }\n\n    return () => {\n      if (successDismissTimerRef.current) {\n        window.clearTimeout(successDismissTimerRef.current)\n        successDismissTimerRef.current = null\n      }\n    }\n  }, [indicatorStatus, isEditing, meta, recordId])\n\n  const handleSave = async () => {\n    const nextValue = draftValue ?? baseValue\n    if (nextValue === baseValue) {\n      meta.setCommentEditingState(recordId, false)\n      meta.removeCommentDraftValue(recordId)\n      return\n    }\n    const success = await meta.handleUpdate(recordId, { comment: nextValue })\n    if (!success) {\n      return\n    }\n  }\n\n  const handleCancel = () => {\n    if (successDismissTimerRef.current) {\n      window.clearTimeout(successDismissTimerRef.current)\n      successDismissTimerRef.current = null\n    }\n    setShowSuccessIndicator(false)\n    meta.setCommentEditingState(recordId, false)\n    meta.removeCommentDraftValue(recordId)\n    meta.clearUpdateError(`${recordId}:comment`)\n  }\n\n  const renderDialogStatusMessage = () => {\n    if (errorMessage) {\n      return <div className=\"text-xs text-destructive\">{errorMessage}</div>\n    }\n    if (indicatorStatus === \"saving\") {\n      return <div className=\"text-xs text-muted-foreground\">Saving…</div>\n    }\n    if (indicatorStatus === \"saved\" && showSuccessIndicator) {\n      return <div className=\"text-xs text-emerald-600\">Saved</div>\n    }\n    return null\n  }\n\n  return (\n    <div className=\"flex flex-col gap-1\">\n      <Dialog\n        open={isEditing}\n        onOpenChange={(nextOpen) => {\n          if (nextOpen) {\n            meta.setCommentDraftValue(recordId, baseValue)\n            meta.setCommentEditingState(recordId, true)\n          } else {\n            meta.setCommentEditingState(recordId, false)\n            meta.removeCommentDraftValue(recordId)\n          }\n          meta.clearUpdateError(`${recordId}:comment`)\n        }}\n      >\n        <DialogTrigger asChild>\n          <button\n            type=\"button\"\n            className=\"whitespace-pre-wrap break-words rounded-md border border-transparent px-2 py-1 text-left text-sm transition-colors hover:border-border hover:bg-muted focus:outline-hidden focus-visible:ring-2 focus-visible:ring-ring\"\n          >\n            {baseValue.length > 0 ? (\n              baseValue\n            ) : (\n              <span className=\"text-muted-foreground\">Tap to add a comment</span>\n            )}\n          </button>\n        </DialogTrigger>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Edit comment</DialogTitle>\n          </DialogHeader>\n          <textarea\n            value={value}\n            disabled={isSaving}\n            onChange={(event) => {\n              const nextValue = event.target.value\n              meta.setCommentDraftValue(recordId, nextValue)\n              meta.clearUpdateError(`${recordId}:comment`)\n            }}\n            className=\"min-h-[6rem] resize-y rounded-md border border-input bg-background px-2 py-1 text-sm focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed\"\n            aria-label=\"Edit comment\"\n            autoFocus\n          />\n          {renderDialogStatusMessage()}\n          <DialogFooter>\n            <Button\n              onClick={() => {\n                void handleSave()\n              }}\n              disabled={isSaving}\n            >\n              Save\n            </Button>\n            <Button variant=\"outline\" onClick={handleCancel} disabled={isSaving}>\n              Cancel\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n      {/* Intentionally no inline status indicator. Status is shown within the dialog. */}\n    </div>\n  )\n}\n"],"names":["c","_c","React","Button","Dialog","DialogContent","DialogFooter","DialogHeader","DialogTitle","DialogTrigger","CommentCell","t0","$","$i","Symbol","for","meta","recordId","baseValue","isEditing","Boolean","commentEditing","draftValue","commentDrafts","value","isSaving","updatingCells","errorMessage","updateErrors","indicator","cellIndicators","indicatorStatus","status","showSuccessIndicator","setShowSuccessIndicator","useState","successDismissTimerRef","useRef","t1","t2","CommentCell[useEffect()]","current","window","clearTimeout","setTimeout","CommentCell[useEffect() > window.setTimeout()]","setCommentEditingState","removeCommentDraftValue","clearUpdateError","useEffect","t3","CommentCell[handleSave]","nextValue","success","handleUpdate","comment","handleSave","t4","CommentCell[handleCancel]","handleCancel","t5","CommentCell[renderDialogStatusMessage]","renderDialogStatusMessage","t6","nextOpen","setCommentDraftValue","t7","length","t8","t9","t10","event","nextValue_0","target","t11","t12","t13","CommentCell[<Button>.onClick]","t14","t15","t16","t17","t18"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 504, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/features/line-dashboard/components/data-table/cells/need-to-send-cell.jsx"],"sourcesContent":["\"use client\"\n\nimport { Checkbox } from \"@/components/ui/checkbox\"\n\nexport function NeedToSendCell({ meta, recordId, baseValue }) {\n  const draftValue = meta.needToSendDrafts[recordId]\n  const nextValue = draftValue ?? baseValue\n  const isChecked = Number(nextValue) === 1\n  const isSaving = Boolean(meta.updatingCells[`${recordId}:needtosend`])\n  const errorMessage = meta.updateErrors[`${recordId}:needtosend`]\n  const indicator = meta.cellIndicators[`${recordId}:needtosend`]\n  const indicatorStatus = indicator?.status\n\n  return (\n    <div className=\"flex flex-col gap-1\">\n      <div className=\"flex items-center gap-2\">\n        <Checkbox\n          checked={isChecked}\n          onCheckedChange={async (checked) => {\n            const numericNext = checked === true ? 1 : 0\n            if (numericNext === baseValue) {\n              meta.removeNeedToSendDraftValue(recordId)\n              meta.clearUpdateError(`${recordId}:needtosend`)\n              return\n            }\n            meta.setNeedToSendDraftValue(recordId, numericNext)\n            meta.clearUpdateError(`${recordId}:needtosend`)\n            const success = await meta.handleUpdate(recordId, {\n              needtosend: numericNext,\n            })\n            if (!success) {\n              meta.removeNeedToSendDraftValue(recordId)\n            }\n          }}\n          disabled={isSaving}\n          aria-label=\"Toggle need to send\"\n        />\n        <div className=\"flex flex-row items-center gap-1 text-xs text-muted-foreground\">\n          {isChecked ? \"Yes\" : \"No\"}\n          {errorMessage ? (\n            <div className=\"text-xs text-destructive\">{errorMessage}</div>\n          ) : indicatorStatus === \"saving\" ? (\n            <div className=\"text-xs text-muted-foreground\">...</div>\n          ) : indicatorStatus === \"saved\" ? (\n            <div className=\"text-xs text-emerald-600\">✓</div>\n          ) : null}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":["c","_c","Checkbox","NeedToSendCell","t0","$","$i","Symbol","for","meta","recordId","baseValue","draftValue","needToSendDrafts","nextValue","isChecked","Number","isSaving","Boolean","updatingCells","errorMessage","updateErrors","indicator","cellIndicators","indicatorStatus","status","t1","checked","numericNext","removeNeedToSendDraftValue","clearUpdateError","setNeedToSendDraftValue","success","handleUpdate","needtosend","t2","t3","t4","t5","t6"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 669, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/features/line-dashboard/components/data-table/utils.jsx"],"sourcesContent":["import { IconChevronRight } from \"@tabler/icons-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nimport { STEP_COLUMN_KEY_SET } from \"./constants\"\n\nfunction formatShortDateTime(date) {\n  const month = String(date.getMonth() + 1).padStart(2, \"0\")\n  const day = String(date.getDate()).padStart(2, \"0\")\n  const hours = String(date.getHours()).padStart(2, \"0\")\n  const minutes = String(date.getMinutes()).padStart(2, \"0\")\n  return `${month}/${day} ${hours}:${minutes}`\n}\n\nfunction tryParseDate(value) {\n  if (value instanceof Date) {\n    return Number.isNaN(value.getTime()) ? null : value\n  }\n  if (typeof value === \"string\") {\n    const trimmed = value.trim()\n    if (trimmed.length === 0) return null\n    const looksLikeDateTime = /\\d{4}-\\d{2}-\\d{2}[T\\s]\\d{2}:\\d{2}/.test(trimmed)\n    const looksLikeDateOnly = /\\d{4}-\\d{2}-\\d{2}$/.test(trimmed)\n    if (!looksLikeDateTime && !looksLikeDateOnly) return null\n    const parsed = new Date(trimmed)\n    return Number.isNaN(parsed.getTime()) ? null : parsed\n  }\n  return null\n}\n\nexport function formatCellValue(value) {\n  if (value === null || value === undefined) {\n    return <span className=\"text-muted-foreground\">NULL</span>\n  }\n  if (typeof value === \"boolean\") return value ? \"TRUE\" : \"FALSE\"\n  if (typeof value === \"number\" || typeof value === \"bigint\") return value.toString()\n  const parsedDate = tryParseDate(value)\n  if (parsedDate) return formatShortDateTime(parsedDate)\n  if (typeof value === \"string\") {\n    if (value.length === 0) {\n      return <span className=\"text-muted-foreground\">{\"\\\"\\\"\"}</span>\n    }\n    if (value.length > 120) {\n      return <span className=\"whitespace-pre-wrap break-all text-xs leading-relaxed\">{value}</span>\n    }\n    return value\n  }\n  try {\n    return JSON.stringify(value)\n  } catch {\n    return String(value)\n  }\n}\n\nexport function searchableValue(value) {\n  if (value === null || value === undefined) return \"\"\n  const parsedDate = tryParseDate(value)\n  if (parsedDate) {\n    const formatted = formatShortDateTime(parsedDate)\n    return `${formatted} ${parsedDate.toISOString()}`.toLowerCase()\n  }\n  if (typeof value === \"string\") return value.toLowerCase()\n  if (typeof value === \"number\" || typeof value === \"bigint\") return value.toString().toLowerCase()\n  if (typeof value === \"boolean\") return value ? \"true\" : \"false\"\n  try {\n    return JSON.stringify(value).toLowerCase()\n  } catch {\n    return String(value).toLowerCase()\n  }\n}\n\nexport function normalizeStepValue(value) {\n  if (value === null || value === undefined) return null\n  const normalized = String(value).trim()\n  return normalized.length > 0 ? normalized : null\n}\n\nexport function parseMetroSteps(value) {\n  if (Array.isArray(value)) {\n    return value\n      .map((part) => normalizeStepValue(part))\n      .filter((step) => Boolean(step))\n  }\n  if (typeof value === \"string\") {\n    return value\n      .split(\",\")\n      .map((part) => normalizeStepValue(part))\n      .filter((step) => Boolean(step))\n  }\n  const single = normalizeStepValue(value)\n  return single ? [single] : []\n}\n\nexport function renderMetroStepFlow(rowData) {\n  const mainStep = normalizeStepValue(rowData.main_step)\n  const metroSteps = parseMetroSteps(rowData.metro_steps)\n  const statusValue = normalizeStepValue(rowData.status)\n  const metroCurrentStep = normalizeStepValue(rowData.metro_current_step)\n  const metroEndStep = normalizeStepValue(rowData.metro_end_step)\n  const customEndStep = normalizeStepValue(rowData.custom_end_step)\n  const informStep = normalizeStepValue(rowData.inform_step)\n\n  const highlightStep =\n    statusValue === \"MAIN_COMPLETE\"\n      ? mainStep ?? metroCurrentStep ?? null\n      : metroCurrentStep ?? mainStep ?? null\n\n  const endStep = customEndStep ?? metroEndStep ?? null\n\n  const orderedSteps = []\n  if (mainStep) orderedSteps.push(mainStep)\n  if (metroSteps.length > 0) orderedSteps.push(...metroSteps)\n  if (informStep) orderedSteps.push(informStep)\n  if (endStep && !orderedSteps.includes(endStep)) orderedSteps.push(endStep)\n\n  const seen = new Set()\n  const steps = orderedSteps.filter((step) => {\n    if (seen.has(step)) {\n      return false\n    }\n    seen.add(step)\n    return true\n  })\n\n  if (steps.length === 0) {\n    return <span className=\"text-muted-foreground\">-</span>\n  }\n\n  return (\n    <div className=\"flex flex-wrap items-center gap-1\">\n      {steps.map((step, index) => {\n        const isHighlight = highlightStep ? step === highlightStep : false\n        const isEnd = endStep ? step === endStep : false\n        const pillClasses = cn(\n          \"rounded-full border px-2 py-0.5 text-xs font-medium leading-none\",\n          isHighlight\n            ? \"border-primary bg-blue-600 text-primary-foreground\"\n            : isEnd && !isHighlight\n              ? \"border-border bg-slate-800 text-muted-foreground\"\n              : \"border-border bg-white text-foreground\"\n        )\n\n        return (\n          <div key={`${step}-${index}`} className=\"flex items-center gap-1\">\n            {index > 0 ? <IconChevronRight className=\"size-4 shrink-0 text-muted-foreground\" /> : null}\n            <span className={pillClasses}>{step}</span>\n          </div>\n        )\n      })}\n    </div>\n  )\n}\n\nexport function shouldCombineStepColumns(columns) {\n  return columns.some((key) => STEP_COLUMN_KEY_SET.has(key) && (key === \"main_step\" || key === \"metro_steps\"))\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 874, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/features/line-dashboard/components/data-table/column-defs.jsx"],"sourcesContent":["\"use client\"\n\nimport { STEP_COLUMN_KEY_SET } from \"./constants\"\nimport { CommentCell } from \"./cells/comment-cell\"\nimport { NeedToSendCell } from \"./cells/need-to-send-cell\"\nimport { formatCellValue, renderMetroStepFlow } from \"./utils\"\n\nexport function createColumnDefs(columns) {\n  const stepColumnsWithIndex = columns\n    .map((key, index) => ({ key, index }))\n    .filter(({ key }) => STEP_COLUMN_KEY_SET.has(key))\n\n  const shouldCombineSteps =\n    stepColumnsWithIndex.some(({ key }) => key === \"main_step\") ||\n    stepColumnsWithIndex.some(({ key }) => key === \"metro_steps\")\n\n  const baseColumnKeys = shouldCombineSteps\n    ? columns.filter((key) => !STEP_COLUMN_KEY_SET.has(key))\n    : [...columns]\n\n  const makeColumnDef = (colKey) => ({\n    id: colKey,\n    header: () => colKey,\n    accessorFn: (row) => row[colKey],\n    meta: {\n      isEditable: colKey === \"comment\" || colKey === \"needtosend\",\n    },\n    cell: (info) => {\n      const meta = info.table.options.meta\n\n      if (colKey === \"comment\") {\n        const rowData = info.row.original\n        const rawId = rowData?.id\n        if (!meta || rawId === undefined || rawId === null) {\n          return formatCellValue(info.getValue())\n        }\n        const recordId = String(rawId)\n        const baseValueRaw = rowData?.comment\n        const baseValue =\n          typeof baseValueRaw === \"string\"\n            ? baseValueRaw\n            : baseValueRaw == null\n              ? \"\"\n              : String(baseValueRaw)\n        return <CommentCell meta={meta} recordId={recordId} baseValue={baseValue} />\n      }\n\n      if (colKey === \"needtosend\") {\n        const rowData = info.row.original\n        const rawId = rowData?.id\n        if (!meta || rawId === undefined || rawId === null) {\n          return formatCellValue(info.getValue())\n        }\n        const recordId = String(rawId)\n        const baseValueRaw = rowData?.needtosend\n        const baseValue =\n          typeof baseValueRaw === \"number\"\n            ? baseValueRaw\n            : typeof baseValueRaw === \"string\"\n              ? Number.parseInt(baseValueRaw, 10) || 0\n              : Number(baseValueRaw) || 0\n        return <NeedToSendCell meta={meta} recordId={recordId} baseValue={baseValue} />\n      }\n\n      return formatCellValue(info.getValue())\n    },\n    enableSorting: colKey !== \"comment\",\n  })\n\n  const defs = baseColumnKeys.map((key) => makeColumnDef(key))\n\n  if (shouldCombineSteps) {\n    const insertionIndex = stepColumnsWithIndex.length\n      ? Math.min(...stepColumnsWithIndex.map(({ index }) => index))\n      : defs.length\n    const headerLabel = stepColumnsWithIndex[0]?.key ?? \"Step Flow\"\n    const stepColumnDef = {\n      id: \"metro_step_flow\",\n      header: () => headerLabel,\n      accessorFn: (row) => row[\"main_step\"] ?? row[\"metro_steps\"] ?? null,\n      cell: (info) => renderMetroStepFlow(info.row.original),\n      enableSorting: false,\n      meta: {\n        isEditable: false,\n      },\n    }\n    defs.splice(Math.min(Math.max(insertionIndex, 0), defs.length), 0, stepColumnDef)\n  }\n\n  return defs\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOO,SAAS,iBAAiB,OAAO;IACtC,MAAM,uBAAuB,QAC1B,GAAG,CAAC,CAAC,KAAK,QAAU,CAAC;YAAE;YAAK;QAAM,CAAC,GACnC,MAAM,CAAC,CAAC,EAAE,GAAG,EAAE,GAAK,sNAAmB,CAAC,GAAG,CAAC;IAE/C,MAAM,qBACJ,qBAAqB,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE,GAAK,QAAQ,gBAC/C,qBAAqB,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE,GAAK,QAAQ;IAEjD,MAAM,iBAAiB,qBACnB,QAAQ,MAAM,CAAC,CAAC,MAAQ,CAAC,sNAAmB,CAAC,GAAG,CAAC,QACjD;WAAI;KAAQ;IAEhB,MAAM,gBAAgB,CAAC,SAAW,CAAC;YACjC,IAAI;YACJ,QAAQ,IAAM;YACd,YAAY,CAAC,MAAQ,GAAG,CAAC,OAAO;YAChC,MAAM;gBACJ,YAAY,WAAW,aAAa,WAAW;YACjD;YACA,MAAM,CAAC;gBACL,MAAM,OAAO,KAAK,KAAK,CAAC,OAAO,CAAC,IAAI;gBAEpC,IAAI,WAAW,WAAW;oBACxB,MAAM,UAAU,KAAK,GAAG,CAAC,QAAQ;oBACjC,MAAM,QAAQ,SAAS;oBACvB,IAAI,CAAC,QAAQ,UAAU,aAAa,UAAU,MAAM;wBAClD,OAAO,IAAA,+MAAe,EAAC,KAAK,QAAQ;oBACtC;oBACA,MAAM,WAAW,OAAO;oBACxB,MAAM,eAAe,SAAS;oBAC9B,MAAM,YACJ,OAAO,iBAAiB,WACpB,eACA,gBAAgB,OACd,KACA,OAAO;oBACf,qBAAO,8ZAAC,8NAAW;wBAAC,MAAM;wBAAM,UAAU;wBAAU,WAAW;;;;;;gBACjE;gBAEA,IAAI,WAAW,cAAc;oBAC3B,MAAM,UAAU,KAAK,GAAG,CAAC,QAAQ;oBACjC,MAAM,QAAQ,SAAS;oBACvB,IAAI,CAAC,QAAQ,UAAU,aAAa,UAAU,MAAM;wBAClD,OAAO,IAAA,+MAAe,EAAC,KAAK,QAAQ;oBACtC;oBACA,MAAM,WAAW,OAAO;oBACxB,MAAM,eAAe,SAAS;oBAC9B,MAAM,YACJ,OAAO,iBAAiB,WACpB,eACA,OAAO,iBAAiB,WACtB,OAAO,QAAQ,CAAC,cAAc,OAAO,IACrC,OAAO,iBAAiB;oBAChC,qBAAO,8ZAAC,4OAAc;wBAAC,MAAM;wBAAM,UAAU;wBAAU,WAAW;;;;;;gBACpE;gBAEA,OAAO,IAAA,+MAAe,EAAC,KAAK,QAAQ;YACtC;YACA,eAAe,WAAW;QAC5B,CAAC;IAED,MAAM,OAAO,eAAe,GAAG,CAAC,CAAC,MAAQ,cAAc;IAEvD,IAAI,oBAAoB;QACtB,MAAM,iBAAiB,qBAAqB,MAAM,GAC9C,KAAK,GAAG,IAAI,qBAAqB,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE,GAAK,UACpD,KAAK,MAAM;QACf,MAAM,cAAc,oBAAoB,CAAC,EAAE,EAAE,OAAO;QACpD,MAAM,gBAAgB;YACpB,IAAI;YACJ,QAAQ,IAAM;YACd,YAAY,CAAC,MAAQ,GAAG,CAAC,YAAY,IAAI,GAAG,CAAC,cAAc,IAAI;YAC/D,MAAM,CAAC,OAAS,IAAA,mNAAmB,EAAC,KAAK,GAAG,CAAC,QAAQ;YACrD,eAAe;YACf,MAAM;gBACJ,YAAY;YACd;QACF;QACA,KAAK,MAAM,CAAC,KAAK,GAAG,CAAC,KAAK,GAAG,CAAC,gBAAgB,IAAI,KAAK,MAAM,GAAG,GAAG;IACrE;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 974, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/features/line-dashboard/components/data-table/global-filter.js"],"sourcesContent":["import { searchableValue } from \"./utils\"\n\nexport const createGlobalFilterFn = (columns) =>\n  (row, _columnId, filterValue) => {\n    if (!filterValue) return true\n    const lc = String(filterValue).toLowerCase()\n    return columns.some((key) => {\n      const value = row.original?.[key]\n      return searchableValue(value).includes(lc)\n    })\n  }\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,uBAAuB,CAAC,UACnC,CAAC,KAAK,WAAW;QACf,IAAI,CAAC,aAAa,OAAO;QACzB,MAAM,KAAK,OAAO,aAAa,WAAW;QAC1C,OAAO,QAAQ,IAAI,CAAC,CAAC;YACnB,MAAM,QAAQ,IAAI,QAAQ,EAAE,CAAC,IAAI;YACjC,OAAO,IAAA,+MAAe,EAAC,OAAO,QAAQ,CAAC;QACzC;IACF","debugId":null}},
    {"offset": {"line": 995, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/features/line-dashboard/components/data-table/use-cell-indicators.js"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport {\n  MIN_SAVING_VISIBLE_MS,\n  SAVED_VISIBLE_MS,\n  SAVING_DELAY_MS,\n} from \"./constants\"\n\nfunction clearAllTimers(timers) {\n  if (timers.savingDelay) clearTimeout(timers.savingDelay)\n  if (timers.transition) clearTimeout(timers.transition)\n  if (timers.savedCleanup) clearTimeout(timers.savedCleanup)\n}\n\nexport function useCellIndicators() {\n  const [cellIndicators, setCellIndicators] = React.useState({})\n  const cellIndicatorsRef = React.useRef(cellIndicators)\n  const indicatorTimersRef = React.useRef({})\n  const activeIndicatorKeysRef = React.useRef(new Set())\n\n  React.useEffect(() => {\n    cellIndicatorsRef.current = cellIndicators\n  }, [cellIndicators])\n\n  React.useEffect(() => {\n    const timersRef = indicatorTimersRef\n    const activeKeysRef = activeIndicatorKeysRef\n\n    return () => {\n      Object.values(timersRef.current).forEach(clearAllTimers)\n      timersRef.current = {}\n      activeKeysRef.current.clear()\n    }\n  }, [])\n\n  const getTimerEntry = React.useCallback((key) => {\n    const existing = indicatorTimersRef.current[key]\n    if (existing) return existing\n    const created = {}\n    indicatorTimersRef.current[key] = created\n    return created\n  }, [])\n\n  const clearTimer = React.useCallback((key, timerName) => {\n    const entry = indicatorTimersRef.current[key]\n    if (!entry) return\n    const timer = entry[timerName]\n    if (timer !== undefined) {\n      clearTimeout(timer)\n      delete entry[timerName]\n    }\n  }, [])\n\n  const removeIndicatorImmediate = React.useCallback((key, allowedStatuses) => {\n    setCellIndicators((prev) => {\n      const current = prev[key]\n      if (!current) return prev\n      if (allowedStatuses && !allowedStatuses.includes(current.status)) {\n        return prev\n      }\n      const next = { ...prev }\n      delete next[key]\n      return next\n    })\n  }, [])\n\n  const begin = React.useCallback(\n    (keys) => {\n      if (keys.length === 0) return\n\n      setCellIndicators((prev) => {\n        let next = null\n        keys.forEach((key) => {\n          if (key in prev) {\n            if (next === null) next = { ...prev }\n            delete next[key]\n          }\n        })\n        return next ?? prev\n      })\n\n      keys.forEach((key) => {\n        activeIndicatorKeysRef.current.add(key)\n        const timers = getTimerEntry(key)\n        clearTimer(key, \"savingDelay\")\n        clearTimer(key, \"transition\")\n        clearTimer(key, \"savedCleanup\")\n        timers.savingDelay = setTimeout(() => {\n          delete timers.savingDelay\n          if (!activeIndicatorKeysRef.current.has(key)) return\n          setCellIndicators((prev) => ({\n            ...prev,\n            [key]: { status: \"saving\", visibleSince: Date.now() },\n          }))\n        }, SAVING_DELAY_MS)\n      })\n    },\n    [clearTimer, getTimerEntry]\n  )\n\n  const finalize = React.useCallback(\n    (keys, outcome) => {\n      if (keys.length === 0) return\n      const now = Date.now()\n\n      keys.forEach((key) => {\n        activeIndicatorKeysRef.current.delete(key)\n        clearTimer(key, \"savingDelay\")\n        clearTimer(key, \"transition\")\n        clearTimer(key, \"savedCleanup\")\n        const timers = getTimerEntry(key)\n        const indicator = cellIndicatorsRef.current[key]\n\n        const runWithMinimumVisible = (task) => {\n          if (indicator && indicator.status === \"saving\") {\n            const elapsed = now - indicator.visibleSince\n            const wait = Math.max(0, MIN_SAVING_VISIBLE_MS - elapsed)\n            if (wait > 0) {\n              timers.transition = setTimeout(() => {\n                delete timers.transition\n                task()\n              }, wait)\n              return\n            }\n          }\n          task()\n        }\n\n        if (outcome === \"success\") {\n          runWithMinimumVisible(() => {\n            if (activeIndicatorKeysRef.current.has(key)) return\n            setCellIndicators((prev) => ({\n              ...prev,\n              [key]: { status: \"saved\", visibleSince: Date.now() },\n            }))\n            timers.savedCleanup = setTimeout(() => {\n              delete timers.savedCleanup\n              if (activeIndicatorKeysRef.current.has(key)) return\n              removeIndicatorImmediate(key, [\"saved\"])\n            }, SAVED_VISIBLE_MS)\n          })\n        } else {\n          runWithMinimumVisible(() => {\n            if (activeIndicatorKeysRef.current.has(key)) return\n            removeIndicatorImmediate(key, [\"saving\"])\n          })\n        }\n      })\n    },\n    [clearTimer, getTimerEntry, removeIndicatorImmediate]\n  )\n\n  return { cellIndicators, begin, finalize }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1208, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/features/line-dashboard/components/data-table/use-data-table.js"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport { DEFAULT_TABLE, getDefaultSinceValue } from \"./constants\"\nimport { useCellIndicators } from \"./use-cell-indicators\"\n\nfunction deleteKeys(record, keys) {\n  if (keys.length === 0) return record\n  let next = null\n  keys.forEach((key) => {\n    if (key in record) {\n      if (next === null) next = { ...record }\n      delete next[key]\n    }\n  })\n  return next ?? record\n}\n\nfunction removeKey(record, key) {\n  if (!(key in record)) return record\n  const next = { ...record }\n  delete next[key]\n  return next\n}\n\nfunction normalizeTablePayload(payload) {\n  if (!payload || typeof payload !== \"object\") {\n    return {\n      table: DEFAULT_TABLE,\n      since: getDefaultSinceValue(),\n      rowCount: 0,\n      columns: [],\n      rows: [],\n    }\n  }\n\n  const normalizedColumns = Array.isArray(payload.columns)\n    ? payload.columns.filter((value) => typeof value === \"string\")\n    : []\n\n  const normalizedRows = Array.isArray(payload.rows)\n    ? payload.rows\n        .filter((row) => row && typeof row === \"object\")\n        .map((row) => ({ ...row }))\n    : []\n\n  const rowCountRaw = Number(payload.rowCount)\n  const normalizedRowCount = Number.isFinite(rowCountRaw) ? rowCountRaw : normalizedRows.length\n\n  const normalizedSince =\n    typeof payload.since === \"string\"\n      ? payload.since\n      : payload.since === null\n        ? null\n        : null\n\n  const normalizedTable = typeof payload.table === \"string\" ? payload.table : null\n\n  return {\n    table: normalizedTable,\n    since: normalizedSince,\n    rowCount: normalizedRowCount,\n    columns: normalizedColumns,\n    rows: normalizedRows,\n  }\n}\n\nexport function useDataTableState({ lineId }) {\n  const [selectedTable, setSelectedTable] = React.useState(DEFAULT_TABLE)\n  const [columns, setColumns] = React.useState([])\n  const [rows, setRows] = React.useState([])\n  const [since, setSince] = React.useState(() => getDefaultSinceValue())\n  const [appliedSince, setAppliedSince] = React.useState(() => getDefaultSinceValue())\n  const [filter, setFilter] = React.useState(\"\")\n  const [sorting, setSorting] = React.useState([])\n  const [commentDrafts, setCommentDrafts] = React.useState({})\n  const [commentEditing, setCommentEditing] = React.useState({})\n  const [needToSendDrafts, setNeedToSendDrafts] = React.useState({})\n  const [updatingCells, setUpdatingCells] = React.useState({})\n  const [updateErrors, setUpdateErrors] = React.useState({})\n  const [isLoadingRows, setIsLoadingRows] = React.useState(false)\n  const [rowsError, setRowsError] = React.useState(null)\n  const [lastFetchedCount, setLastFetchedCount] = React.useState(0)\n\n  const rowsRequestRef = React.useRef(0)\n  const { cellIndicators, begin, finalize } = useCellIndicators()\n\n  const fetchRows = React.useCallback(async () => {\n    const requestId = ++rowsRequestRef.current\n    setIsLoadingRows(true)\n    setRowsError(null)\n\n    try {\n      const effectiveSince = since && since.length > 0 ? since : getDefaultSinceValue()\n      const params = new URLSearchParams({ table: selectedTable, since: effectiveSince })\n      if (lineId) params.set(\"lineId\", lineId)\n\n      const response = await fetch(`/api/tables?${params.toString()}`, { cache: \"no-store\" })\n      let payload = {}\n\n      try {\n        payload = await response.json()\n      } catch {\n        payload = {}\n      }\n\n      if (!response.ok) {\n        const message =\n          payload &&\n          typeof payload === \"object\" &&\n          \"error\" in payload &&\n          typeof payload.error === \"string\"\n            ? payload.error\n            : `Request failed with status ${response.status}`\n        throw new Error(message)\n      }\n\n      if (rowsRequestRef.current !== requestId) return\n\n      const {\n        columns: fetchedColumns,\n        rows: fetchedRows,\n        rowCount,\n        since: applied,\n        table,\n      } = normalizeTablePayload(payload)\n\n      setColumns(fetchedColumns)\n      setRows(fetchedRows)\n      setLastFetchedCount(rowCount)\n      setAppliedSince(applied)\n      setCommentDrafts({})\n      setCommentEditing({})\n      setNeedToSendDrafts({})\n\n      if (table && table !== selectedTable) {\n        setSelectedTable(table)\n      }\n    } catch (error) {\n      if (rowsRequestRef.current !== requestId) return\n      const message = error instanceof Error ? error.message : \"Failed to load table rows\"\n      setRowsError(message)\n      setColumns([])\n      setRows([])\n      setLastFetchedCount(0)\n    } finally {\n      if (rowsRequestRef.current === requestId) setIsLoadingRows(false)\n    }\n  }, [since, selectedTable, lineId])\n\n  React.useEffect(() => {\n    fetchRows()\n  }, [fetchRows])\n\n  const clearUpdateError = React.useCallback((key) => {\n    setUpdateErrors((prev) => removeKey(prev, key))\n  }, [])\n\n  const handleUpdate = React.useCallback(\n    async (recordId, updates) => {\n      const fields = Object.keys(updates)\n      if (!recordId || fields.length === 0) return false\n\n      const cellKeys = fields.map((field) => `${recordId}:${field}`)\n\n      setUpdatingCells((prev) => {\n        const next = { ...prev }\n        cellKeys.forEach((key) => {\n          next[key] = true\n        })\n        return next\n      })\n\n      setUpdateErrors((prev) => {\n        const next = { ...prev }\n        cellKeys.forEach((key) => {\n          if (key in next) delete next[key]\n        })\n        return next\n      })\n\n      begin(cellKeys)\n\n      let updateSucceeded = false\n\n      try {\n        const response = await fetch(\"/api/tables/update\", {\n          method: \"PATCH\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            table: selectedTable,\n            id: recordId,\n            updates,\n          }),\n        })\n\n        let payload = {}\n        try {\n          payload = await response.json()\n        } catch {\n          payload = {}\n        }\n\n        if (!response.ok) {\n          const message =\n            payload &&\n            typeof payload === \"object\" &&\n            \"error\" in payload &&\n            typeof payload.error === \"string\"\n              ? payload.error\n              : `Failed to update (status ${response.status})`\n          throw new Error(message)\n        }\n\n        setRows((previousRows) =>\n          previousRows.map((row) => {\n            const rowId = String(row?.id ?? \"\")\n            if (rowId !== recordId) return row\n            return {\n              ...row,\n              ...updates,\n            }\n          })\n        )\n\n        if (\"comment\" in updates) {\n          setCommentDrafts((prev) => removeKey(prev, recordId))\n          setCommentEditing((prev) => removeKey(prev, recordId))\n        }\n\n        if (\"needtosend\" in updates) {\n          setNeedToSendDrafts((prev) => removeKey(prev, recordId))\n        }\n\n        updateSucceeded = true\n        return true\n      } catch (error) {\n        const message = error instanceof Error ? error.message : \"Failed to update\"\n\n        setUpdateErrors((prev) => {\n          const next = { ...prev }\n          cellKeys.forEach((key) => {\n            next[key] = message\n          })\n          return next\n        })\n\n        return false\n      } finally {\n        setUpdatingCells((prev) => deleteKeys(prev, cellKeys))\n        finalize(cellKeys, updateSucceeded ? \"success\" : \"error\")\n      }\n    },\n    [selectedTable, begin, finalize]\n  )\n\n  const setCommentEditingState = React.useCallback((recordId, editing) => {\n    if (!recordId) return\n    setCommentEditing((prev) => {\n      if (editing) {\n        return {\n          ...prev,\n          [recordId]: true,\n        }\n      }\n      return removeKey(prev, recordId)\n    })\n  }, [])\n\n  const setCommentDraftValue = React.useCallback((recordId, value) => {\n    if (!recordId) return\n    setCommentDrafts((prev) => ({\n      ...prev,\n      [recordId]: value,\n    }))\n  }, [])\n\n  const removeCommentDraftValue = React.useCallback((recordId) => {\n    if (!recordId) return\n    setCommentDrafts((prev) => removeKey(prev, recordId))\n  }, [])\n\n  const setNeedToSendDraftValue = React.useCallback((recordId, value) => {\n    if (!recordId) return\n    setNeedToSendDrafts((prev) => ({\n      ...prev,\n      [recordId]: value,\n    }))\n  }, [])\n\n  const removeNeedToSendDraftValue = React.useCallback((recordId) => {\n    if (!recordId) return\n    setNeedToSendDrafts((prev) => removeKey(prev, recordId))\n  }, [])\n\n  const tableMeta = React.useMemo(\n    () => ({\n      commentDrafts,\n      commentEditing,\n      needToSendDrafts,\n      updatingCells,\n      updateErrors,\n      cellIndicators,\n      clearUpdateError,\n      setCommentDraftValue,\n      removeCommentDraftValue,\n      setCommentEditingState,\n      setNeedToSendDraftValue,\n      removeNeedToSendDraftValue,\n      handleUpdate,\n    }),\n    [\n      commentDrafts,\n      commentEditing,\n      needToSendDrafts,\n      updatingCells,\n      updateErrors,\n      cellIndicators,\n      clearUpdateError,\n      setCommentDraftValue,\n      removeCommentDraftValue,\n      setCommentEditingState,\n      setNeedToSendDraftValue,\n      removeNeedToSendDraftValue,\n      handleUpdate,\n    ]\n  )\n\n  return {\n    selectedTable,\n    columns,\n    rows,\n    since,\n    setSince,\n    appliedSince,\n    filter,\n    setFilter,\n    sorting,\n    setSorting,\n    isLoadingRows,\n    rowsError,\n    lastFetchedCount,\n    fetchRows,\n    tableMeta,\n  }\n}\n"],"names":["React","DEFAULT_TABLE","getDefaultSinceValue","useCellIndicators","deleteKeys","record","keys","length","next","forEach","key","removeKey","normalizeTablePayload","payload","table","since","rowCount","columns","rows","normalizedColumns","Array","isArray","filter","value","normalizedRows","row","map","rowCountRaw","Number","normalizedRowCount","isFinite","normalizedSince","normalizedTable","useDataTableState","lineId","selectedTable","setSelectedTable","useState","setColumns","setRows","setSince","appliedSince","setAppliedSince","setFilter","sorting","setSorting","commentDrafts","setCommentDrafts","commentEditing","setCommentEditing","needToSendDrafts","setNeedToSendDrafts","updatingCells","setUpdatingCells","updateErrors","setUpdateErrors","isLoadingRows","setIsLoadingRows","rowsError","setRowsError","lastFetchedCount","setLastFetchedCount","rowsRequestRef","useRef","cellIndicators","begin","finalize","fetchRows","useCallback","requestId","current","effectiveSince","params","URLSearchParams","set","response","fetch","toString","cache","json","ok","message","error","status","Error","fetchedColumns","fetchedRows","applied","useEffect","clearUpdateError","prev","handleUpdate","recordId","updates","fields","Object","cellKeys","field","updateSucceeded","method","headers","body","JSON","stringify","id","previousRows","rowId","String","setCommentEditingState","editing","setCommentDraftValue","removeCommentDraftValue","setNeedToSendDraftValue","removeNeedToSendDraftValue","tableMeta","useMemo"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 1584, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/features/line-dashboard/components/data-table/data-table.jsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport {\n  flexRender,\n  getCoreRowModel,\n  getFilteredRowModel,\n  getPaginationRowModel,\n  getSortedRowModel,\n  useReactTable,\n} from \"@tanstack/react-table\"\nimport {\n  IconAlertCircle,\n  IconChevronDown,\n  IconChevronUp,\n  IconDatabase,\n  IconLoader,\n  IconReload,\n} from \"@tabler/icons-react\"\n\n\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\"\n\nimport {\n  dateFormatter,\n  numberFormatter,\n  timeFormatter,\n  toDateInputValue,\n} from \"./constants\"\nimport { cn } from \"@/lib/utils\"\n\nimport { createColumnDefs } from \"./column-defs\"\nimport { createGlobalFilterFn } from \"./global-filter\"\nimport { useDataTableState } from \"./use-data-table\"\n\nexport function DataTable({ lineId }) {\n  const {\n    selectedTable,\n    columns,\n    rows,\n    since,\n    setSince,\n    appliedSince,\n    filter,\n    setFilter,\n    sorting,\n    setSorting,\n    isLoadingRows,\n    rowsError,\n    lastFetchedCount,\n    fetchRows,\n    tableMeta,\n  } = useDataTableState({ lineId })\n\n  const columnDefs = React.useMemo(() => createColumnDefs(columns), [columns])\n  const globalFilterFn = React.useMemo(() => createGlobalFilterFn(columns), [columns])\n\n  // eslint-disable-next-line react-hooks/incompatible-library\n  const table = useReactTable({\n    data: rows,\n    columns: columnDefs,\n    meta: tableMeta,\n    state: {\n      sorting,\n      globalFilter: filter,\n    },\n    onSortingChange: setSorting,\n    onGlobalFilterChange: setFilter,\n    globalFilterFn,\n    getCoreRowModel: getCoreRowModel(),\n    getFilteredRowModel: getFilteredRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getPaginationRowModel: getPaginationRowModel(),\n    columnResizeMode: \"onChange\",\n  })\n\n  const emptyStateColSpan = Math.max(table.getVisibleLeafColumns().length, 1)\n  const totalLoaded = rows.length\n  const hasNoRows = !isLoadingRows && rowsError === null && columns.length === 0\n  const sinceLabel = appliedSince\n    ? dateFormatter.format(new Date(`${appliedSince}T00:00:00Z`))\n    : \"all time\"\n  const [lastUpdatedLabel, setLastUpdatedLabel] = React.useState(null)\n\n  React.useEffect(() => {\n    if (isLoadingRows) return\n    setLastUpdatedLabel(timeFormatter.format(new Date()))\n  }, [isLoadingRows])\n\n  return (\n    <section className=\"flex flex-col gap-2 px-4 lg:px-6\">\n      <div className=\"flex flex-wrap items-start justify-between gap-4\">\n        <div className=\"flex flex-col gap-1\">\n          <div className=\"flex items-center gap-2 text-lg font-semibold\">\n            <IconDatabase className=\"size-5\" />\n            데이터 테이블 · {lineId}\n          </div>\n          <p className=\"text-sm text-muted-foreground\">\n            Loaded {numberFormatter.format(totalLoaded)} rows from {selectedTable} (since {sinceLabel}).\n          </p>\n        </div>\n      </div>\n\n      <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\n        <Input\n          placeholder=\"Filter rows…\"\n          value={filter}\n          onChange={(event) => table.setGlobalFilter(event.target.value)}\n          className=\"sm:w-80\"\n          aria-label=\"Filter table rows\"\n        />\n\n        <div className=\"flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center\">\n          <Input\n            type=\"date\"\n            max={toDateInputValue(new Date())}\n            value={since}\n            onChange={(event) => setSince(event.target.value)}\n            className=\"w-full sm:w-40\"\n            aria-label=\"Since date\"\n          />\n\n          <Button variant=\"outline\" onClick={() => void fetchRows()} disabled={isLoadingRows}>\n            {isLoadingRows ? <IconLoader className=\"mr-2 size-4 animate-spin\" /> : <IconReload className=\"mr-2 size-4\" />}\n            Refresh\n          </Button>\n        </div>\n      </div>\n\n      {rowsError ? (\n        <div className=\"flex items-center gap-2 rounded-lg border border-destructive/40 bg-destructive/10 px-4 py-3 text-sm text-destructive\">\n          <IconAlertCircle className=\"size-5 shrink-0\" />\n          <span>{rowsError}</span>\n        </div>\n      ) : null}\n\n      <TableContainer className=\"h-[600px] overflow-auto rounded-lg border\">\n        <Table className=\"min-w-max\" stickyHeader>\n          <TableHeader className=\"sticky top-0 z-10 bg-muted/40\">\n            {table.getHeaderGroups().map((headerGroup) => (\n              <TableRow key={headerGroup.id}>\n                {headerGroup.headers.map((header) => {\n                  const canSort = header.column.getCanSort()\n                  const sortDir = header.column.getIsSorted()\n                  return (\n                    <TableHead key={header.id} className=\"whitespace-nowrap\">\n                      {canSort ? (\n                        <button\n                          className=\"inline-flex items-center gap-1\"\n                          onClick={header.column.getToggleSortingHandler()}\n                        >\n                          {flexRender(header.column.columnDef.header, header.getContext())}\n                          {sortDir === \"asc\" && <IconChevronUp className=\"size-4\" />}\n                          {sortDir === \"desc\" && <IconChevronDown className=\"size-4\" />}\n                        </button>\n                      ) : (\n                        flexRender(header.column.columnDef.header, header.getContext())\n                      )}\n                      <span\n                        onMouseDown={header.getResizeHandler()}\n                        onTouchStart={header.getResizeHandler()}\n                        className=\"absolute right-0 top-0 h-full w-1 cursor-col-resize select-none touch-none\"\n                      />\n                    </TableHead>\n                  )\n                })}\n              </TableRow>\n            ))}\n          </TableHeader>\n\n          <TableBody>\n            {isLoadingRows ? (\n              <TableRow>\n                <TableCell colSpan={emptyStateColSpan} className=\"h-24 text-center text-sm text-muted-foreground\">\n                  Loading rows…\n                </TableCell>\n              </TableRow>\n            ) : rowsError ? (\n              <TableRow>\n                <TableCell colSpan={emptyStateColSpan} className=\"h-24 text-center text-sm text-destructive\">\n                  {rowsError}\n                </TableCell>\n              </TableRow>\n            ) : hasNoRows ? (\n              <TableRow>\n                <TableCell colSpan={emptyStateColSpan} className=\"h-24 text-center text-sm text-muted-foreground\">\n                  No rows returned.\n                </TableCell>\n              </TableRow>\n            ) : table.getRowModel().rows.length === 0 ? (\n              <TableRow>\n                <TableCell colSpan={emptyStateColSpan} className=\"h-24 text-center text-sm text-muted-foreground\">\n                  No rows match your filter.\n                </TableCell>\n              </TableRow>\n            ) : (\n              table.getRowModel().rows.map((row) => (\n                <TableRow key={row.id}>\n                  {row.getVisibleCells().map((cell) => {\n                    const isEditable = Boolean(cell.column.columnDef.meta?.isEditable)\n                    return (\n                      <TableCell\n                        key={cell.id}\n                        data-editable={isEditable ? \"true\" : \"false\"}\n                        className={cn(\n                          \"align-top\",\n                          !isEditable && \"caret-transparent focus:outline-none\"\n                        )}\n                      >\n                        {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                      </TableCell>\n                    )\n                  })}\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      <div className=\"flex flex-wrap items-center gap-1 justify-end text-xs text-muted-foreground\">\n        <span>Updated {isLoadingRows ? \"just now\" : lastUpdatedLabel ?? \"just now\"}</span>\n      </div>\n    </section>\n  )\n}\n"],"names":["React","flexRender","getCoreRowModel","getFilteredRowModel","getPaginationRowModel","getSortedRowModel","useReactTable","IconAlertCircle","IconChevronDown","IconChevronUp","IconDatabase","IconLoader","IconReload","Button","Input","Table","TableBody","TableCell","TableContainer","TableHead","TableHeader","TableRow","dateFormatter","numberFormatter","timeFormatter","toDateInputValue","cn","createColumnDefs","createGlobalFilterFn","useDataTableState","DataTable","lineId","selectedTable","columns","rows","since","setSince","appliedSince","filter","setFilter","sorting","setSorting","isLoadingRows","rowsError","lastFetchedCount","fetchRows","tableMeta","columnDefs","useMemo","globalFilterFn","table","data","meta","state","globalFilter","onSortingChange","onGlobalFilterChange","columnResizeMode","emptyStateColSpan","Math","max","getVisibleLeafColumns","length","totalLoaded","hasNoRows","sinceLabel","format","Date","lastUpdatedLabel","setLastUpdatedLabel","useState","useEffect","event","setGlobalFilter","target","value","getHeaderGroups","map","headerGroup","id","headers","header","canSort","column","getCanSort","sortDir","getIsSorted","getToggleSortingHandler","columnDef","getContext","getResizeHandler","getRowModel","row","getVisibleCells","cell","isEditable","Boolean"],"mappings":"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","ignoreList":[],"debugId":null}}]
}