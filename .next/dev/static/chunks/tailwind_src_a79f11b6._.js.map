{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/features/auth/openid/constants.js"],"sourcesContent":["// src/features/auth/openid/constants.js\nexport const OPENID_SESSION_KEY = \"demo.openid.session\";\n\n// 컴포넌트 간 세션 변경을 브로드캐스트하기 위한 사용자 정의 이벤트 이름\nexport const OPENID_SESSION_CHANGE_EVENT = \"openid:session-change\";\n\nexport const DUMMY_OPENID_PROVIDER = {\n  id: \"corporate-openid\",\n  name: \"Corporate OpenID Provider\",\n  description:\n    \"Simulated OpenID Connect identity provider for the offline dashboard.\",\n};\n"],"names":[],"mappings":"AAAA,wCAAwC;;;;;;;;;AACjC,MAAM,qBAAqB;AAG3B,MAAM,8BAA8B;AAEpC,MAAM,wBAAwB;IACnC,IAAI;IACJ,MAAM;IACN,aACE;AACJ","debugId":null}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/features/auth/openid/openIdClient.js"],"sourcesContent":["// src/features/auth/openid/openIdClient.js\nimport {\n  OPENID_SESSION_CHANGE_EVENT,\n  OPENID_SESSION_KEY,\n} from \"./constants\";\n\nfunction emitSessionChange(detail) {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n\n  const event = new CustomEvent(OPENID_SESSION_CHANGE_EVENT, {\n    detail,\n  });\n\n  window.dispatchEvent(event);\n}\n\nasync function parseResponse(response) {\n  const payload = await response.json();\n\n  if (!response.ok || !payload?.success) {\n    const error = payload?.error ?? \"OpenID 인증에 실패했습니다.\";\n    throw new Error(error);\n  }\n\n  return payload;\n}\n\nexport async function authenticateWithDummyProvider({\n  providerId,\n  returnUrl = \"/\",\n}) {\n  const response = await fetch(\"/api/auth/login\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ providerId, returnUrl }),\n  });\n\n  const payload = await parseResponse(response);\n\n  if (typeof window !== \"undefined\") {\n    sessionStorage.setItem(OPENID_SESSION_KEY, JSON.stringify(payload));\n    emitSessionChange(payload);\n  }\n\n  return payload;\n}\n\nexport function loadStoredSession() {\n  if (typeof window === \"undefined\") {\n    return null;\n  }\n\n  const raw = sessionStorage.getItem(OPENID_SESSION_KEY);\n  if (!raw) {\n    return null;\n  }\n\n  try {\n    return JSON.parse(raw);\n  } catch (error) {\n    console.error(\"Failed to parse stored OpenID session\", error);\n    return null;\n  }\n}\n\nexport function clearStoredSession() {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n\n  sessionStorage.removeItem(OPENID_SESSION_KEY);\n  emitSessionChange(null);\n}\n"],"names":[],"mappings":"AAAA,2CAA2C;;;;;;;;;AAC3C;;AAKA,SAAS,kBAAkB,MAAM;IAC/B;;IAIA,MAAM,QAAQ,IAAI,YAAY,4LAA2B,EAAE;QACzD;IACF;IAEA,OAAO,aAAa,CAAC;AACvB;AAEA,eAAe,cAAc,QAAQ;IACnC,MAAM,UAAU,MAAM,SAAS,IAAI;IAEnC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,SAAS;QACrC,MAAM,QAAQ,SAAS,SAAS;QAChC,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT;AAEO,eAAe,8BAA8B,EAClD,UAAU,EACV,YAAY,GAAG,EAChB;IACC,MAAM,WAAW,MAAM,MAAM,mBAAmB;QAC9C,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;YAAE;YAAY;QAAU;IAC/C;IAEA,MAAM,UAAU,MAAM,cAAc;IAEpC,wCAAmC;QACjC,eAAe,OAAO,CAAC,mLAAkB,EAAE,KAAK,SAAS,CAAC;QAC1D,kBAAkB;IACpB;IAEA,OAAO;AACT;AAEO,SAAS;IACd;;IAIA,MAAM,MAAM,eAAe,OAAO,CAAC,mLAAkB;IACrD,IAAI,CAAC,KAAK;QACR,OAAO;IACT;IAEA,IAAI;QACF,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yCAAyC;QACvD,OAAO;IACT;AACF;AAEO,SAAS;IACd;;IAIA,eAAe,UAAU,CAAC,mLAAkB;IAC5C,kBAAkB;AACpB","debugId":null}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/app/login/page.jsx"],"sourcesContent":["\"use client\";\n\n// src/app/login/page.jsx\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DUMMY_OPENID_PROVIDER,\n  OPENID_SESSION_KEY,\n} from \"@/features/auth/openid/constants\";\nimport {\n  authenticateWithDummyProvider,\n  clearStoredSession,\n  loadStoredSession,\n} from \"@/features/auth/openid/openIdClient\";\n\nexport default function LoginPage() {\n  const router = useRouter();\n  const [session, setSession] = useState(() => loadStoredSession());\n  const [status, setStatus] = useState(\"idle\");\n  const [message, setMessage] = useState(\"\");\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") {\n      return undefined;\n    }\n\n    const handleStorage = (event) => {\n      if (event.storageArea && event.storageArea !== sessionStorage) {\n        return;\n      }\n\n      if (event.key && event.key !== OPENID_SESSION_KEY) {\n        return;\n      }\n\n      setSession(loadStoredSession());\n    };\n\n    window.addEventListener(\"storage\", handleStorage);\n    return () => window.removeEventListener(\"storage\", handleStorage);\n  }, []);\n\n  const handleLogin = async () => {\n    setStatus(\"loading\");\n    setMessage(\"\");\n\n    try {\n      const payload = await authenticateWithDummyProvider({\n        providerId: DUMMY_OPENID_PROVIDER.id,\n        returnUrl: \"/\",\n      });\n\n      setSession(payload);\n      setStatus(\"success\");\n      setMessage(payload.message ?? \"로그인에 성공했습니다.\");\n\n      setTimeout(() => {\n        router.push(payload.redirectUrl ?? \"/\");\n      }, 600);\n    } catch (error) {\n      setStatus(\"error\");\n      setMessage(error.message ?? \"로그인 중 오류가 발생했습니다.\");\n    }\n  };\n\n  const handleLogout = () => {\n    clearStoredSession();\n    setSession(null);\n    setStatus(\"idle\");\n    setMessage(\"세션이 초기화되었습니다.\");\n  };\n\n  return (\n    <div className=\"flex min-h-[600px] flex-col items-center justify-center gap-10 py-12\">\n      <div className=\"w-full max-w-lg rounded-xl border bg-background p-10 shadow-sm\">\n        <div className=\"space-y-2 text-center\">\n          <h1 className=\"text-3xl font-semibold\">OpenID SSO 로그인</h1>\n          <p className=\"text-muted-foreground\">\n            {DUMMY_OPENID_PROVIDER.description}\n          </p>\n        </div>\n\n        <div className=\"mt-8 space-y-6\">\n          <div className=\"rounded-lg border border-dashed bg-muted/30 p-6 text-left\">\n            <h2 className=\"text-lg font-medium text-foreground\">\n              {DUMMY_OPENID_PROVIDER.name}\n            </h2>\n            <p className=\"mt-2 text-sm text-muted-foreground\">\n              실제 IdP 연동 시 OpenID Authorization Code Flow를 대체할 수 있도록\n              구성된 더미 로그인 절차입니다.\n            </p>\n            <Button\n              className=\"mt-6 w-full\"\n              size=\"lg\"\n              disabled={status === \"loading\"}\n              onClick={handleLogin}\n            >\n              {status === \"loading\" ? \"로그인 처리 중...\" : \"SSO로 로그인\"}\n            </Button>\n          </div>\n\n          {session ? (\n            <div className=\"space-y-2 rounded-lg border bg-accent/30 p-5 text-sm\">\n              <p>\n                <span className=\"font-semibold\">세션 사용자:</span> {session.user?.name}\n              </p>\n              <p>\n                <span className=\"font-semibold\">이메일:</span> {session.user?.email}\n              </p>\n              <p>\n                <span className=\"font-semibold\">토큰 만료:</span> {session.tokens?.expiresAt}\n              </p>\n              <div className=\"flex gap-2 pt-2\">\n                <Button\n                  variant=\"outline\"\n                  className=\"flex-1\"\n                  onClick={() => router.push(session.redirectUrl ?? \"/\")}\n                >\n                  대시보드로 이동\n                </Button>\n                <Button variant=\"ghost\" className=\"flex-1\" onClick={handleLogout}>\n                  세션 초기화\n                </Button>\n              </div>\n            </div>\n          ) : null}\n\n          {message ? (\n            <p\n              className={`text-sm ${\n                status === \"error\"\n                  ? \"text-destructive\"\n                  : \"text-muted-foreground\"\n              }`}\n            >\n              {message}\n            </p>\n          ) : null}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["useEffect","useState","useRouter","Button","DUMMY_OPENID_PROVIDER","OPENID_SESSION_KEY","authenticateWithDummyProvider","clearStoredSession","loadStoredSession","LoginPage","router","session","setSession","status","setStatus","message","setMessage","window","undefined","handleStorage","event","storageArea","sessionStorage","key","addEventListener","removeEventListener","handleLogin","payload","providerId","id","returnUrl","setTimeout","push","redirectUrl","error","handleLogout","description","name","user","email","tokens","expiresAt"],"mappings":"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","ignoreList":[],"debugId":null}}]
}