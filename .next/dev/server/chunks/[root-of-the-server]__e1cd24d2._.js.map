{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/lib/auth-session.js"],"sourcesContent":["// src/lib/auth-session.js\n// 간단한 세션 인코딩/디코딩 유틸리티 (추후 실제 인증 연동 시 교체 용이)\n\nconst AUTH_SESSION_COOKIE = \"app_session_v1\"\n\n/**\n * 세션 쿠키에 저장할 사용자 정보를 문자열로 직렬화합니다.\n * URL-safe 하도록 encodeURIComponent를 활용해 JSON을 감쌉니다.\n */\nexport function encodeUserSession(user) {\n  if (!user || typeof user !== \"object\") return \"\"\n  try {\n    const payload = JSON.stringify({ user })\n    return encodeURIComponent(payload)\n  } catch {\n    return \"\"\n  }\n}\n\n/** 쿠키 값을 사용자 객체로 역직렬화합니다. 실패 시 null 반환 */\nexport function decodeUserSession(value) {\n  if (!value || typeof value !== \"string\") return null\n  try {\n    const decoded = decodeURIComponent(value)\n    const parsed = JSON.parse(decoded)\n    if (parsed && typeof parsed === \"object\" && parsed.user && typeof parsed.user === \"object\") {\n      const { name = \"\", email = \"\", avatar = \"\" } = parsed.user\n      if (!name && !email) return null\n      return { name, email, avatar }\n    }\n  } catch {\n    return null\n  }\n  return null\n}\n\n/** 쿠키 스토어(cookies())에서 현재 사용자 정보 추출 */\nexport function getSessionUserFromCookies(cookieStore) {\n  if (!cookieStore || typeof cookieStore.get !== \"function\") return null\n  const stored = cookieStore.get(AUTH_SESSION_COOKIE)\n  if (!stored || !stored.value) return null\n  return decodeUserSession(stored.value)\n}\n\n/** 세션 쿠키 이름 (middleware 및 라우트에서 공유) */\nexport const AUTH_COOKIE_NAME = AUTH_SESSION_COOKIE\n\n/**\n * 데모용 OpenID SSO 사용자 정보.\n * 실제 환경에서는 이 부분을 OpenID 프로필 응답으로 교체하면 된다.\n */\nexport const DUMMY_SSO_USER = Object.freeze({\n  name: \"Demo SSO User\",\n  email: \"sso.user@example.com\",\n  avatar: \"https://www.gravatar.com/avatar/?d=mp\",\n})\n"],"names":[],"mappings":"AAAA,0BAA0B;AAC1B,4CAA4C;;;;;;;;;;;;;AAE5C,MAAM,sBAAsB;AAMrB,SAAS,kBAAkB,IAAI;IACpC,IAAI,CAAC,QAAQ,OAAO,SAAS,UAAU,OAAO;IAC9C,IAAI;QACF,MAAM,UAAU,KAAK,SAAS,CAAC;YAAE;QAAK;QACtC,OAAO,mBAAmB;IAC5B,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAGO,SAAS,kBAAkB,KAAK;IACrC,IAAI,CAAC,SAAS,OAAO,UAAU,UAAU,OAAO;IAChD,IAAI;QACF,MAAM,UAAU,mBAAmB;QACnC,MAAM,SAAS,KAAK,KAAK,CAAC;QAC1B,IAAI,UAAU,OAAO,WAAW,YAAY,OAAO,IAAI,IAAI,OAAO,OAAO,IAAI,KAAK,UAAU;YAC1F,MAAM,EAAE,OAAO,EAAE,EAAE,QAAQ,EAAE,EAAE,SAAS,EAAE,EAAE,GAAG,OAAO,IAAI;YAC1D,IAAI,CAAC,QAAQ,CAAC,OAAO,OAAO;YAC5B,OAAO;gBAAE;gBAAM;gBAAO;YAAO;QAC/B;IACF,EAAE,OAAM;QACN,OAAO;IACT;IACA,OAAO;AACT;AAGO,SAAS,0BAA0B,WAAW;IACnD,IAAI,CAAC,eAAe,OAAO,YAAY,GAAG,KAAK,YAAY,OAAO;IAClE,MAAM,SAAS,YAAY,GAAG,CAAC;IAC/B,IAAI,CAAC,UAAU,CAAC,OAAO,KAAK,EAAE,OAAO;IACrC,OAAO,kBAAkB,OAAO,KAAK;AACvC;AAGO,MAAM,mBAAmB;AAMzB,MAAM,iBAAiB,OAAO,MAAM,CAAC;IAC1C,MAAM;IACN,OAAO;IACP,QAAQ;AACV","debugId":null}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/app/api/auth/login/route.js"],"sourcesContent":["// src/app/api/auth/login/route.js\nimport { NextResponse } from \"next/server\"\n\nimport { AUTH_COOKIE_NAME, DUMMY_SSO_USER, encodeUserSession } from \"@/lib/auth-session\"\n\nexport async function POST(request) {\n  let redirectTo = \"/\"\n  try {\n    const body = await request.json()\n    if (body && typeof body.redirectTo === \"string\" && body.redirectTo.startsWith(\"/\")) {\n      redirectTo = body.redirectTo\n    }\n  } catch {\n    // body가 없거나 JSON 파싱 실패 시 기본값 유지\n  }\n\n  const sessionValue = encodeUserSession(DUMMY_SSO_USER)\n  const response = NextResponse.json({ success: true, user: DUMMY_SSO_USER, redirectTo })\n\n  response.cookies.set({\n    name: AUTH_COOKIE_NAME,\n    value: sessionValue,\n    httpOnly: true,\n    sameSite: \"lax\",\n    path: \"/\",\n    secure: process.env.NODE_ENV === \"production\",\n    maxAge: 60 * 60 * 24 * 7, // 7일\n  })\n\n  return response\n}\n"],"names":[],"mappings":"AAAA,kCAAkC;;;;;AAClC;AAEA;;;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI,aAAa;IACjB,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,IAAI,QAAQ,OAAO,KAAK,UAAU,KAAK,YAAY,KAAK,UAAU,CAAC,UAAU,CAAC,MAAM;YAClF,aAAa,KAAK,UAAU;QAC9B;IACF,EAAE,OAAM;IACN,gCAAgC;IAClC;IAEA,MAAM,eAAe,IAAA,gKAAiB,EAAC,6JAAc;IACrD,MAAM,WAAW,iXAAY,CAAC,IAAI,CAAC;QAAE,SAAS;QAAM,MAAM,6JAAc;QAAE;IAAW;IAErF,SAAS,OAAO,CAAC,GAAG,CAAC;QACnB,MAAM,+JAAgB;QACtB,OAAO;QACP,UAAU;QACV,UAAU;QACV,MAAM;QACN,QAAQ,oDAAyB;QACjC,QAAQ,KAAK,KAAK,KAAK;IACzB;IAEA,OAAO;AACT","debugId":null}}]
}