{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/features/auth/openid/constants.js"],"sourcesContent":["// src/features/auth/openid/constants.js\nexport const OPENID_SESSION_KEY = \"demo.openid.session\";\n\n// 컴포넌트 간 세션 변경을 브로드캐스트하기 위한 사용자 정의 이벤트 이름\nexport const OPENID_SESSION_CHANGE_EVENT = \"openid:session-change\";\n\nexport const DUMMY_OPENID_PROVIDER = {\n  id: \"corporate-openid\",\n  name: \"Corporate OpenID Provider\",\n  description:\n    \"Simulated OpenID Connect identity provider for the offline dashboard.\",\n};\n"],"names":[],"mappings":"AAAA,wCAAwC;;;;;;;;;AACjC,MAAM,qBAAqB;AAG3B,MAAM,8BAA8B;AAEpC,MAAM,wBAAwB;IACnC,IAAI;IACJ,MAAM;IACN,aACE;AACJ","debugId":null}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/features/auth/openid/openIdClient.js"],"sourcesContent":["// src/features/auth/openid/openIdClient.js\nimport {\n  OPENID_SESSION_CHANGE_EVENT,\n  OPENID_SESSION_KEY,\n} from \"./constants\";\n\nfunction emitSessionChange(detail) {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n\n  const event = new CustomEvent(OPENID_SESSION_CHANGE_EVENT, {\n    detail,\n  });\n\n  window.dispatchEvent(event);\n}\n\nasync function parseResponse(response) {\n  const payload = await response.json();\n\n  if (!response.ok || !payload?.success) {\n    const error = payload?.error ?? \"OpenID 인증에 실패했습니다.\";\n    throw new Error(error);\n  }\n\n  return payload;\n}\n\nexport async function authenticateWithDummyProvider({\n  providerId,\n  returnUrl = \"/\",\n}) {\n  const response = await fetch(\"/api/auth/login\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ providerId, returnUrl }),\n  });\n\n  const payload = await parseResponse(response);\n\n  if (typeof window !== \"undefined\") {\n    sessionStorage.setItem(OPENID_SESSION_KEY, JSON.stringify(payload));\n    emitSessionChange(payload);\n  }\n\n  return payload;\n}\n\nexport function loadStoredSession() {\n  if (typeof window === \"undefined\") {\n    return null;\n  }\n\n  const raw = sessionStorage.getItem(OPENID_SESSION_KEY);\n  if (!raw) {\n    return null;\n  }\n\n  try {\n    return JSON.parse(raw);\n  } catch (error) {\n    console.error(\"Failed to parse stored OpenID session\", error);\n    return null;\n  }\n}\n\nexport function clearStoredSession() {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n\n  sessionStorage.removeItem(OPENID_SESSION_KEY);\n  emitSessionChange(null);\n}\n"],"names":[],"mappings":"AAAA,2CAA2C;;;;;;;;;AAC3C;;AAKA,SAAS,kBAAkB,MAAM;IAC/B,wCAAmC;QACjC;IACF;;;IAEA,MAAM;AAKR;AAEA,eAAe,cAAc,QAAQ;IACnC,MAAM,UAAU,MAAM,SAAS,IAAI;IAEnC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,SAAS;QACrC,MAAM,QAAQ,SAAS,SAAS;QAChC,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT;AAEO,eAAe,8BAA8B,EAClD,UAAU,EACV,YAAY,GAAG,EAChB;IACC,MAAM,WAAW,MAAM,MAAM,mBAAmB;QAC9C,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,KAAK,SAAS,CAAC;YAAE;YAAY;QAAU;IAC/C;IAEA,MAAM,UAAU,MAAM,cAAc;IAEpC;;IAKA,OAAO;AACT;AAEO,SAAS;IACd,wCAAmC;QACjC,OAAO;IACT;;;IAEA,MAAM;AAWR;AAEO,SAAS;IACd,wCAAmC;QACjC;IACF;;;AAIF","debugId":null}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///home/pjw75/tailwind/src/app/page.jsx"],"sourcesContent":["\"use client\";\n\n// src/app/page.jsx\nimport Link from \"next/link\";\nimport { useEffect, useState } from \"react\";\n\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DUMMY_OPENID_PROVIDER,\n  OPENID_SESSION_KEY,\n} from \"@/features/auth/openid/constants\";\nimport { loadStoredSession } from \"@/features/auth/openid/openIdClient\";\n\nexport default function Page() {\n  const [session, setSession] = useState(() => loadStoredSession());\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") {\n      return undefined;\n    }\n\n    const handleStorage = (event) => {\n      if (event.storageArea && event.storageArea !== sessionStorage) {\n        return;\n      }\n\n      if (event.key && event.key !== OPENID_SESSION_KEY) {\n        return;\n      }\n\n      setSession(loadStoredSession());\n    };\n\n    window.addEventListener(\"storage\", handleStorage);\n    return () => window.removeEventListener(\"storage\", handleStorage);\n  }, []);\n\n  return (\n    <section className=\"relative h-[600px] overflow-hidden rounded-xl border shadow-sm\">\n      <div\n        aria-hidden=\"true\"\n        className=\"absolute inset-0 bg-[url('/images/Wow-gif.gif')] bg-cover bg-center\"\n      />\n      <div\n        aria-hidden=\"true\"\n        className=\"absolute inset-0 bg-white/70 backdrop-blur-sm dark:bg-slate-950/70\"\n      />\n      <div className=\"relative z-10 grid gap-6 p-6\">\n        <div className=\"grid gap-4\">\n          <h1 className=\"text-3xl font-semibold tracking-tight\">Welcome</h1>\n          <p className=\"text-base text-muted-foreground\">\n            더미 OpenID SSO 로그인을 통해 데모 계정으로 대시보드를 체험할 수\n            있습니다. 폐쇄망 이전 시 실제 IdP 엔드포인트를 연결하면 동일한 흐름을\n            재사용할 수 있습니다.\n          </p>\n        </div>\n\n        {session ? (\n          <div className=\"max-w-md rounded-lg border bg-background/90 p-4 shadow-sm\">\n            <p className=\"font-medium\">현재 로그인된 사용자</p>\n            <ul className=\"mt-2 space-y-1 text-sm text-muted-foreground\">\n              <li>이름: {session.user?.name}</li>\n              <li>이메일: {session.user?.email}</li>\n              <li>토큰 만료: {session.tokens?.expiresAt}</li>\n            </ul>\n            <p className=\"mt-3 text-xs text-muted-foreground\">\n              실제 OpenID 프로바이더와 연동 시 토큰 저장 로직만 교체하면 됩니다.\n            </p>\n          </div>\n        ) : (\n          <div className=\"flex max-w-md flex-col gap-3 rounded-lg border border-dashed bg-background/90 p-4 shadow-sm\">\n            <p className=\"text-sm text-muted-foreground\">\n              아직 로그인되지 않았습니다. 아래 버튼을 눌러\n              {\" \"}\n              {DUMMY_OPENID_PROVIDER.name}에 연결하세요.\n            </p>\n            <Button asChild size=\"lg\" className=\"w-fit\">\n              <Link href=\"/login\">OpenID 로그인 페이지로 이동</Link>\n            </Button>\n          </div>\n        )}\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA,mBAAmB;AACnB;AACA;AAEA;AACA;AAIA;AAXA;;;;;;;AAae,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kbAAQ,EAAC,IAAM,IAAA,kLAAiB;IAE9D,IAAA,mbAAS,EAAC;QACR,wCAAmC;YACjC,OAAO;QACT;;;QAEA,MAAM;IAcR,GAAG,EAAE;IAEL,qBACE,+cAAC;QAAQ,WAAU;;0BACjB,+cAAC;gBACC,eAAY;gBACZ,WAAU;;;;;;0BAEZ,+cAAC;gBACC,eAAY;gBACZ,WAAU;;;;;;0BAEZ,+cAAC;gBAAI,WAAU;;kCACb,+cAAC;wBAAI,WAAU;;0CACb,+cAAC;gCAAG,WAAU;0CAAwC;;;;;;0CACtD,+cAAC;gCAAE,WAAU;0CAAkC;;;;;;;;;;;;oBAOhD,wBACC,+cAAC;wBAAI,WAAU;;0CACb,+cAAC;gCAAE,WAAU;0CAAc;;;;;;0CAC3B,+cAAC;gCAAG,WAAU;;kDACZ,+cAAC;;4CAAG;4CAAK,QAAQ,IAAI,EAAE;;;;;;;kDACvB,+cAAC;;4CAAG;4CAAM,QAAQ,IAAI,EAAE;;;;;;;kDACxB,+cAAC;;4CAAG;4CAAQ,QAAQ,MAAM,EAAE;;;;;;;;;;;;;0CAE9B,+cAAC;gCAAE,WAAU;0CAAqC;;;;;;;;;;;6CAKpD,+cAAC;wBAAI,WAAU;;0CACb,+cAAC;gCAAE,WAAU;;oCAAgC;oCAE1C;oCACA,mLAAqB,CAAC,IAAI;oCAAC;;;;;;;0CAE9B,+cAAC,wJAAM;gCAAC,OAAO;gCAAC,MAAK;gCAAK,WAAU;0CAClC,cAAA,+cAAC,wYAAI;oCAAC,MAAK;8CAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOlC","debugId":null}}]
}