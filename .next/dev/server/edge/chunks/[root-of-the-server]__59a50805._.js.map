{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/tailwind/src/lib/auth-session.js"],"sourcesContent":["// src/lib/auth-session.js\n// 간단한 세션 인코딩/디코딩 유틸리티 (추후 실제 인증 연동 시 교체 용이)\n\nconst AUTH_SESSION_COOKIE = \"app_session_v1\"\n\n/**\n * 세션 쿠키에 저장할 사용자 정보를 문자열로 직렬화합니다.\n * URL-safe 하도록 encodeURIComponent를 활용해 JSON을 감쌉니다.\n */\nexport function encodeUserSession(user) {\n  if (!user || typeof user !== \"object\") return \"\"\n  try {\n    const payload = JSON.stringify({ user })\n    return encodeURIComponent(payload)\n  } catch {\n    return \"\"\n  }\n}\n\n/** 쿠키 값을 사용자 객체로 역직렬화합니다. 실패 시 null 반환 */\nexport function decodeUserSession(value) {\n  if (!value || typeof value !== \"string\") return null\n  try {\n    const decoded = decodeURIComponent(value)\n    const parsed = JSON.parse(decoded)\n    if (parsed && typeof parsed === \"object\" && parsed.user && typeof parsed.user === \"object\") {\n      const { name = \"\", email = \"\", avatar = \"\" } = parsed.user\n      if (!name && !email) return null\n      return { name, email, avatar }\n    }\n  } catch {\n    return null\n  }\n  return null\n}\n\n/** 쿠키 스토어(cookies())에서 현재 사용자 정보 추출 */\nexport function getSessionUserFromCookies(cookieStore) {\n  if (!cookieStore || typeof cookieStore.get !== \"function\") return null\n  const stored = cookieStore.get(AUTH_SESSION_COOKIE)\n  if (!stored || !stored.value) return null\n  return decodeUserSession(stored.value)\n}\n\n/** 세션 쿠키 이름 (middleware 및 라우트에서 공유) */\nexport const AUTH_COOKIE_NAME = AUTH_SESSION_COOKIE\n\n/**\n * 데모용 OpenID SSO 사용자 정보.\n * 실제 환경에서는 이 부분을 OpenID 프로필 응답으로 교체하면 된다.\n */\nexport const DUMMY_SSO_USER = Object.freeze({\n  name: \"Demo SSO User\",\n  email: \"sso.user@example.com\",\n  avatar: \"https://www.gravatar.com/avatar/?d=mp\",\n})\n"],"names":[],"mappings":"AAAA,0BAA0B;AAC1B,4CAA4C;;;;;;;;;;;;;AAE5C,MAAM,sBAAsB;AAMrB,SAAS,kBAAkB,IAAI;IACpC,IAAI,CAAC,QAAQ,OAAO,SAAS,UAAU,OAAO;IAC9C,IAAI;QACF,MAAM,UAAU,KAAK,SAAS,CAAC;YAAE;QAAK;QACtC,OAAO,mBAAmB;IAC5B,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAGO,SAAS,kBAAkB,KAAK;IACrC,IAAI,CAAC,SAAS,OAAO,UAAU,UAAU,OAAO;IAChD,IAAI;QACF,MAAM,UAAU,mBAAmB;QACnC,MAAM,SAAS,KAAK,KAAK,CAAC;QAC1B,IAAI,UAAU,OAAO,WAAW,YAAY,OAAO,IAAI,IAAI,OAAO,OAAO,IAAI,KAAK,UAAU;YAC1F,MAAM,EAAE,OAAO,EAAE,EAAE,QAAQ,EAAE,EAAE,SAAS,EAAE,EAAE,GAAG,OAAO,IAAI;YAC1D,IAAI,CAAC,QAAQ,CAAC,OAAO,OAAO;YAC5B,OAAO;gBAAE;gBAAM;gBAAO;YAAO;QAC/B;IACF,EAAE,OAAM;QACN,OAAO;IACT;IACA,OAAO;AACT;AAGO,SAAS,0BAA0B,WAAW;IACnD,IAAI,CAAC,eAAe,OAAO,YAAY,GAAG,KAAK,YAAY,OAAO;IAClE,MAAM,SAAS,YAAY,GAAG,CAAC;IAC/B,IAAI,CAAC,UAAU,CAAC,OAAO,KAAK,EAAE,OAAO;IACrC,OAAO,kBAAkB,OAAO,KAAK;AACvC;AAGO,MAAM,mBAAmB;AAMzB,MAAM,iBAAiB,OAAO,MAAM,CAAC;IAC1C,MAAM;IACN,OAAO;IACP,QAAQ;AACV"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/tailwind/middleware.js"],"sourcesContent":["import { NextResponse } from \"next/server\"\n\nimport { AUTH_COOKIE_NAME } from \"@/lib/auth-session\"\n\nconst PUBLIC_PATHS = new Set([\"/login\"])\nconst STATIC_EXTENSION_REGEX = /\\.[a-zA-Z0-9]+$/\n\nfunction isPublicPath(pathname) {\n  return PUBLIC_PATHS.has(pathname)\n}\n\nfunction resolveRedirectTarget(request, fallback = \"/\") {\n  const candidate = request.nextUrl.searchParams.get(\"redirectTo\")\n  if (candidate && candidate.startsWith(\"/\")) {\n    try {\n      const targetUrl = new URL(candidate, request.nextUrl.origin)\n      return { pathname: targetUrl.pathname, search: targetUrl.search }\n    } catch {\n      return { pathname: fallback, search: \"\" }\n    }\n  }\n  return { pathname: fallback, search: \"\" }\n}\n\nexport function middleware(request) {\n  const { pathname } = request.nextUrl\n\n  if (pathname.startsWith(\"/_next\") || pathname.startsWith(\"/favicon\")) {\n    return NextResponse.next()\n  }\n\n  if (pathname.startsWith(\"/api\")) {\n    return NextResponse.next()\n  }\n\n  if (STATIC_EXTENSION_REGEX.test(pathname)) {\n    return NextResponse.next()\n  }\n\n  const sessionCookie = request.cookies.get(AUTH_COOKIE_NAME)\n\n  if (isPublicPath(pathname)) {\n    if (sessionCookie) {\n      const redirectUrl = request.nextUrl.clone()\n      const target = resolveRedirectTarget(request)\n      redirectUrl.pathname = target.pathname\n      redirectUrl.search = target.search\n      return NextResponse.redirect(redirectUrl)\n    }\n    return NextResponse.next()\n  }\n\n  if (!sessionCookie) {\n    const loginUrl = request.nextUrl.clone()\n    loginUrl.pathname = \"/login\"\n    const search = request.nextUrl.search ?? \"\"\n    loginUrl.searchParams.set(\"redirectTo\", `${pathname}${search}`)\n    return NextResponse.redirect(loginUrl)\n  }\n\n  return NextResponse.next()\n}\n\nexport const config = {\n  matcher: [\"/((?!_next/static|_next/image|favicon.ico).*)\"],\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAEA;;;AAEA,MAAM,eAAe,IAAI,IAAI;IAAC;CAAS;AACvC,MAAM,yBAAyB;AAE/B,SAAS,aAAa,QAAQ;IAC5B,OAAO,aAAa,GAAG,CAAC;AAC1B;AAEA,SAAS,sBAAsB,OAAO,EAAE,WAAW,GAAG;IACpD,MAAM,YAAY,QAAQ,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;IACnD,IAAI,aAAa,UAAU,UAAU,CAAC,MAAM;QAC1C,IAAI;YACF,MAAM,YAAY,IAAI,IAAI,WAAW,QAAQ,OAAO,CAAC,MAAM;YAC3D,OAAO;gBAAE,UAAU,UAAU,QAAQ;gBAAE,QAAQ,UAAU,MAAM;YAAC;QAClE,EAAE,OAAM;YACN,OAAO;gBAAE,UAAU;gBAAU,QAAQ;YAAG;QAC1C;IACF;IACA,OAAO;QAAE,UAAU;QAAU,QAAQ;IAAG;AAC1C;AAEO,SAAS,WAAW,OAAO;IAChC,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,IAAI,SAAS,UAAU,CAAC,aAAa,SAAS,UAAU,CAAC,aAAa;QACpE,OAAO,iaAAY,CAAC,IAAI;IAC1B;IAEA,IAAI,SAAS,UAAU,CAAC,SAAS;QAC/B,OAAO,iaAAY,CAAC,IAAI;IAC1B;IAEA,IAAI,uBAAuB,IAAI,CAAC,WAAW;QACzC,OAAO,iaAAY,CAAC,IAAI;IAC1B;IAEA,MAAM,gBAAgB,QAAQ,OAAO,CAAC,GAAG,CAAC,qKAAgB;IAE1D,IAAI,aAAa,WAAW;QAC1B,IAAI,eAAe;YACjB,MAAM,cAAc,QAAQ,OAAO,CAAC,KAAK;YACzC,MAAM,SAAS,sBAAsB;YACrC,YAAY,QAAQ,GAAG,OAAO,QAAQ;YACtC,YAAY,MAAM,GAAG,OAAO,MAAM;YAClC,OAAO,iaAAY,CAAC,QAAQ,CAAC;QAC/B;QACA,OAAO,iaAAY,CAAC,IAAI;IAC1B;IAEA,IAAI,CAAC,eAAe;QAClB,MAAM,WAAW,QAAQ,OAAO,CAAC,KAAK;QACtC,SAAS,QAAQ,GAAG;QACpB,MAAM,SAAS,QAAQ,OAAO,CAAC,MAAM,IAAI;QACzC,SAAS,YAAY,CAAC,GAAG,CAAC,cAAc,GAAG,WAAW,QAAQ;QAC9D,OAAO,iaAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,OAAO,iaAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAgD;AAC5D"}}]
}